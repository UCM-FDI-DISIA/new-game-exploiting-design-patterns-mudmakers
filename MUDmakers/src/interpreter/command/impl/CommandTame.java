package interpreter.command.impl;

import world.DatabaseObject;
import world.Mobile;
import world.Player;
import world.World;
import world.state.pet.StatePassiveAgressivePet;

public class CommandTame extends AbstractCommand {
	
	Player player;
	Mobile pet;

	public CommandTame() {
		
	}
	
	public CommandTame(Player player, String pet) {
		this.player = player;
		
		if (pet.startsWith("p")) {
			for (DatabaseObject item : world.getDatabaseObjects()) {
				if (item.getName().toLowerCase().equals(
						pet.toLowerCase().trim()) && World.getInstance().mobileExists(pet)) {
					this.pet = (Mobile) item;
				}
			}
		}		
	}

	@Override
	public void execute() {
		if (pet != null) {
			
			player.setPet(pet);
			
			pet.setState(new StatePassiveAgressivePet(player));
			
			player.sendToPlayer("Pet " + pet.getName()	+ " has been tamed");
		}
	}

}
